{"version":3,"sources":["scripts/contentscript.js"],"names":["Hoichoi","regex","regexMovies","interval","link","file","poster","quality","classes","card","video","showTitle","movieTitle","currentQuality","data","detect","m","detected","exec","window","location","href","index","lastIndex","forEach","match","groupIndex","register","_this","this","$","document","on","lookup","check","querySelector","showName","querySelectorAll","movieName","innerText","console","log","img","style","currentStyle","getComputedStyle","bi","backgroundImage","slice","replace","q","src","show","_this2","clearInterval","setInterval","name","init","_this3","chrome","runtime","onMessage","addListener","request","sender","sendResponse","response","status","from"],"mappings":"AAAA,cAEA,WACI,GAAIA,IACAC,MAAO,4CACPC,YAAa,mDACbC,SAAU,KACVC,KAAM,GACNC,KAAM,GACNC,OAAQ,GACRC,QAAS,GACTC,SACIC,KAAM,mBACNF,QAAS,0BACTG,MAAO,YACPC,UAAW,sBACXC,WAAY,kBACZN,OAAQ,cACRO,eAAgB,uBAEpBC,QACAC,OAAQ,SAAgBd,GAGpB,IAFA,GAAIe,GAAI,OACJC,GAAW,EACmC,QAA1CD,EAAIf,EAAMiB,KAAKC,OAAOC,SAASC,QAC/BL,EAAEM,QAAUrB,EAAMsB,WAClBtB,EAAMsB,YAEVP,EAAEQ,QAAQ,SAAUC,EAAOC,GACvBT,GAAW,GAInB,OAAOA,IAEXU,SAAU,WACN,GAAIC,GAAQC,IAEZC,GAAEC,UAAUC,GAAG,QAASH,KAAKrB,QAAQC,KAAM,WACvCmB,EAAMK,WAEVH,EAAEC,UAAUC,GAAG,QAASH,KAAKrB,QAAQD,QAAS,WAC1CqB,EAAMK,WAENJ,KAAKd,OAAOc,KAAK3B,cACjB2B,KAAKI,UAGbC,MAAO,WACH,GAAIxB,GAAQqB,SAASI,cAAcN,KAAKrB,QAAQE,MAChD,IAAIA,EAAO,CACP,GAAI0B,GAAWL,SAASM,iBAAiBR,KAAKrB,QAAQG,WAAW,GAC7D2B,EAAYP,SAASI,cAAcN,KAAKrB,QAAQI,WAChDwB,GACAP,KAAKxB,KAAO+B,EAASG,UACdD,EACPT,KAAKxB,KAAOiC,EAAUC,UAEtBV,KAAKxB,KAAO,iBAEhBmC,QAAQC,IAAI,sBAEZ,IAAIC,GAAMX,SAASI,cAAcN,KAAKrB,QAAQF,OAC9C,IAAIoC,EAAK,CACL,GAAIC,GAAQD,EAAIE,cAAgBzB,OAAO0B,iBAAiBH,GAAK,GACzDI,EAAKH,EAAMI,gBAAgBC,MAAM,MAAOC,QAAQ,KAAM,GAE1DpB,MAAKvB,OAASwC,EAElB,GAAII,GAAInB,SAASI,cAAcN,KAAKrB,QAAQK,eACxCqC,KACArB,KAAKtB,QAAU2C,EAAEX,WAGrBV,KAAKzB,KAAOM,EAAMyC,IAClBtB,KAAKuB,SAGbnB,OAAQ,WACJ,GAAIoB,GAASxB,IAEbW,SAAQC,IAAI,iBACRZ,KAAK1B,UACLmD,cAAczB,KAAK1B,UAEvB0B,KAAK1B,SAAWoD,YAAY,WACxBF,EAAOnB,SACR,MAEPkB,KAAM,WACFvB,KAAKf,MAASV,KAAMyB,KAAKzB,KAAMoD,KAAM3B,KAAKxB,KAAMC,OAAQuB,KAAKvB,OAAQC,QAASsB,KAAKtB,SAE/EsB,KAAK1B,UACLmD,cAAczB,KAAK1B,WAG3BsD,KAAM,WACF,GAAIC,GAAS7B,IAETA,MAAKd,OAAOc,KAAK5B,SACjB4B,KAAKF,WAELgC,OAAOC,QAAQC,UAAUC,YAAY,SAAUC,EAASC,EAAQC,GAC5D,GAAIC,IAAaC,QAAQ,EAAOrD,KAAM4C,EAAO5C,KACzB,UAAhBiD,EAAQK,MAAkC,IAAfV,EAAOtD,OAClC8D,EAASC,QAAS,GAEtBF,EAAaC,OAM7BlE,GAAQyD","file":"contentscript.js","sourcesContent":["'use strict';\n\n(function () {\n    var Hoichoi = {\n        regex: /http(s|)\\:\\/\\/(www\\.|)hoichoi\\.tv\\/(.*)/gm,\n        regexMovies: /http(s|)\\:\\/\\/(www\\.|)hoichoi\\.tv\\/films\\/(.*)/gm,\n        interval: null,\n        link: '',\n        file: '',\n        poster: '',\n        quality: '',\n        classes: {\n            card: '.video-tray-item',\n            quality: '.vjs-resolution-menu li',\n            video: '.vjs-tech',\n            showTitle: '.episode-name .name',\n            movieTitle: 'h1.header-title',\n            poster: '.vjs-poster',\n            currentQuality: '.current-resolution'\n        },\n        data: {},\n        detect: function detect(regex) {\n            var m = void 0,\n                detected = false;\n            while ((m = regex.exec(window.location.href)) !== null) {\n                if (m.index === regex.lastIndex) {\n                    regex.lastIndex++;\n                }\n                m.forEach(function (match, groupIndex) {\n                    detected = true;\n                });\n            }\n\n            return detected;\n        },\n        register: function register() {\n            var _this = this;\n\n            $(document).on('click', this.classes.card, function () {\n                _this.lookup();\n            });\n            $(document).on('click', this.classes.quality, function () {\n                _this.lookup();\n            });\n            if (this.detect(this.regexMovies)) {\n                this.lookup();\n            }\n        },\n        check: function check() {\n            var video = document.querySelector(this.classes.video);\n            if (video) {\n                var showName = document.querySelectorAll(this.classes.showTitle)[1];\n                var movieName = document.querySelector(this.classes.movieTitle);\n                if (showName) {\n                    this.file = showName.innerText;\n                } else if (movieName) {\n                    this.file = movieName.innerText;\n                } else {\n                    this.file = 'File Name Here';\n                }\n                console.log('Ready to Hoichoi...');\n\n                var img = document.querySelector(this.classes.poster);\n                if (img) {\n                    var style = img.currentStyle || window.getComputedStyle(img, false),\n                        bi = style.backgroundImage.slice(4, -1).replace(/\"/g, '');\n\n                    this.poster = bi;\n                }\n                var q = document.querySelector(this.classes.currentQuality);\n                if (q) {\n                    this.quality = q.innerText;\n                }\n\n                this.link = video.src;\n                this.show();\n            }\n        },\n        lookup: function lookup() {\n            var _this2 = this;\n\n            console.log('Looking Up...');\n            if (this.interval) {\n                clearInterval(this.interval);\n            }\n            this.interval = setInterval(function () {\n                _this2.check();\n            }, 2000);\n        },\n        show: function show() {\n            this.data = { link: this.link, name: this.file, poster: this.poster, quality: this.quality };\n\n            if (this.interval) {\n                clearInterval(this.interval);\n            }\n        },\n        init: function init() {\n            var _this3 = this;\n\n            if (this.detect(this.regex)) {\n                this.register();\n\n                chrome.runtime.onMessage.addListener(function (request, sender, sendResponse) {\n                    var response = { status: false, data: _this3.data };\n                    if (request.from == 'popup' && _this3.link != '') {\n                        response.status = true;\n                    }\n                    sendResponse(response);\n                });\n            }\n        }\n    };\n\n    Hoichoi.init();\n})();"]}